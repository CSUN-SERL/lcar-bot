<!-- UAV: all nodes that launch on UAV (jetson) -->
<launch>

    <!-- vim: set ft=xml noet : -->
    <arg name="fcu_url" default="serial:///dev/ttyUSB0:921600" />
    <arg name="gcs_url" default="" />
    <arg name="tgt_system" default="1" />
    <arg name="tgt_component" default="1" />
    <arg name="log_output" default="screen" />
    <arg name="uav_id" default="1" />
    <arg name="machine_name" default="Quad1"/>

    <param name="image_transport" type="string" value="compressed" />

    <node pkg="machine_vision" type="stereo_driver" name="stereo_cam" machine="$(arg machine_name)" />

    <node pkg="stereo_image_proc" type="stereo_image_proc" name="stereo_image_proc"
         ns="stereo_cam" machine="$(arg machine_name)" respawn="true" />

    <node pkg="rqt_gcs" type="backup_control" name="backup_control"
          machine="$(arg machine_name)" respawn="true">
        <param name="id" value="$(arg uav_id)" />
    </node>

    <!-- todo node object avoidance-->

    <include file="$(find rqt_gcs)/launch/node_mavros.launch">
        <arg name="pluginlists_yaml" value="$(find mavros)/launch/px4_pluginlists.yaml" />
        <arg name="config_yaml" value="$(find mavros)/launch/px4_config.yaml" />
        <arg name="fcu_url" value="$(arg fcu_url)" />
        <arg name="gcs_url" value="$(arg gcs_url)" />
        <arg name="tgt_system" value="$(arg tgt_system)" />
        <arg name="tgt_component" value="$(arg tgt_component)" />
        <arg name="log_output" value="$(arg log_output)" />
        <arg name="machine_name" value="$(arg machine_name)"/>
    </include>

</launch>
