<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

  <script>
  $(document).ready(function(){
	   //getLocation();
     showPosition();
			});

    </script>
</head>
<body>

<p id="outmessage"></p>



<div id="mapholder"></div>

<script src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script>
var x =-118;
var y =34;
var map;
var marker;
var newPoint =0;
var la =0;
function getLocation() {
   //if (navigator.geolocation) {
  //     navigator.geolocation.getCurrentPosition(showPosition, showError);
   //} else {
  //     x.innerHTML = "Geolocation is not supported by this browser.";
  //  }

}

function showPosition() {
    //lat = position.coords.latitude;
    //lon = position.coords.longitude;
    latlon = new google.maps.LatLng(y, x)
    mapholder = document.getElementById('mapholder')
    mapholder.style.height = '250px';
    mapholder.style.width = '500px';

    var myOptions = {
    center:latlon,zoom:14,
    mapTypeId:google.maps.MapTypeId.ROADMAP,
    mapTypeControl:false,
    navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
    }

     map = new google.maps.Map(document.getElementById("mapholder"), myOptions);
     marker = new google.maps.Marker({position:latlon,map:map,title:"You are here!"});

    update();
}

function update() {
  //navigator.geolocation.getCurrentPosition(function(position) {
     //newPoint = new google.maps.LatLng( position.coords.latitude,
                                          // position.coords.longitude);

la = new google.maps.LatLng(y,
    x);

    if (marker) {
      // Marker already created - Move it
      marker.setPosition(la);
    }
    else {
      // Marker does not exist - Create it
      marker = new google.maps.Marker({
        position: la,
        map: map
      });
    }

    // Center the map on the new position
    map.setCenter(la);
  //});

  // Call the autoUpdate() function every 5 seconds
  outmessage.innerHTML = newPoint ;
  x += .00055;
  setTimeout(update, 50);
}

function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation."
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable."
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out."
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred."
            break;
    }
}
</script>

</body>
</html>
